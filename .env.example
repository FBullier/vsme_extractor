# Exemple de configuration (NE PAS mettre de secrets dans ce fichier)

# Clé d'API Scaleway (obligatoire)
SCW_API_KEY=

# Optionnel : override de la base URL et du modèle
SCW_BASE_URL=https://api.scaleway.ai/06f1a171-1eef-4d8b-aed5-b78189d17335/v1
SCW_MODEL_NAME=gpt-oss-120b

# Optionnel : protocole OpenAI-compatible utilisé par le provider.
# - chat.completions : le plus compatible
# - responses : nouvelle API OpenAI (si supportée par le provider)
VSME_API_PROTOCOL=chat.completions

# Optionnel : mode d'invocation du LLM.
# - invoke : appel non-stream (par défaut)
# - invoke_stream : streaming (si supporté)
VSME_INVOKE_MODE=invoke

# Optionnel : gestion du rate limit (HTTP 429).
# Exemple: l'API renvoie "10 requests per minute exceeded".
#
# - Nombre de réessais après un 429 (0 = aucun retry)
VSME_RATE_LIMIT_MAX_RETRIES=1
# - Attente (en secondes) avant de réessayer
VSME_RATE_LIMIT_RETRY_SLEEP_S=60
# - Si le serveur renvoie l'en-tête Retry-After, l'utiliser (1/0)
VSME_RATE_LIMIT_USE_RETRY_AFTER=1

# Optionnel : healthcheck LLM au démarrage.
# Le pipeline fait un petit appel LLM ("Réponds uniquement: OK") pour tracer dans les logs
# que le provider répond. Certains providers peuvent être temporairement indisponibles.
#
# - VSME_LLM_HEALTHCHECK : 1/0 pour activer/désactiver complètement.
# - VSME_LLM_HEALTHCHECK_STRICT : 1/0 ; si 0, un échec du check ne bloque pas le démarrage.
VSME_LLM_HEALTHCHECK=1
VSME_LLM_HEALTHCHECK_STRICT=1

# Optionnel : coûts des tokens (euros / million)
VSM_INPUT_COST_EUR=0.15
VSM_OUTPUT_COST_EUR=0.60

# Optionnel : chemin vers un CSV d’indicateurs.
# Si vide, le fallback “packagé” est utilisé (par défaut: vsme_extractor/data/indicateurs_vsme.csv)
VSM_INDICATORS_PATH=

# Optionnel : filtrage par `code_vsme`.
# Séparateurs acceptés : virgule, point-virgule, espaces.
# Exemple: VSME_CODE_VSME_LIST=B3_1,B3_2,C1_1
# Si vide/absent : fallback sur les lignes dont `defaut == 1`.
VSME_CODE_VSME_LIST=

# Optionnel : format de sortie du CLI.
# - xlsx : export Excel (par défaut)
# - json : export JSON (un fichier `.vsme.json` par PDF)
VSME_OUTPUT_FORMAT=xlsx

# Optionnel : statut d'extraction dans la sortie JSON.
# Si activé, le JSON inclut un bloc `status` avec `completed` + éventuelle erreur.
VSME_OUTPUT_JSON_INCLUDE_STATUS=1

# Optionnel : méthode de retrieval utilisée par le CLI (sélection des pages/extraits).
# Valeurs : count | count_refine
VSME_RETRIEVAL_METHOD=count

# Optionnel : seuil relatif (rel_thr) utilisé par la méthode `count_refine`.
# Une page est conservée si (score / best_score) >= rel_thr.
# - 0.40 = comportement par défaut
# - 0.0  = garde toutes les pages scorées (pas de filtrage relatif)
# - 1.0  = garde uniquement la meilleure page
VSME_RETRIEVAL_REL_THR=0.40

# Logging parameters
SME_LOG_LEVEL=INFO
VSME_LOG_FILE=./tmp/vsme.log
VSME_LOG_STDOUT=on

# Audit: log prompts sent to the LLM (WARNING: may contain sensitive data)
VSME_PROMPT_FILE=./tmp/vsme_prompts.log
VSME_PROMPT_STDOUT=off
